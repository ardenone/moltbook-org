# DO NOT COMMIT - Template for GitHub Container Registry authentication
# Use this template to create a SealedSecret with kubeseal
#
# This secret is used for pushing container images to ghcr.io via:
# - build-images.sh script (when run from devpod with mounted secret)
# - Kaniko builds (via docker-config secret reference)
#
# Instructions:
# 1. Create a GitHub Personal Access Token at: https://github.com/settings/tokens
#    Required scopes: write:packages, read:packages, delete:packages
# 2. Fill in the token value below (replace REPLACE_WITH_GITHUB_TOKEN)
# 3. Create SealedSecret: kubeseal --format yaml < github-token-secret-template.yml > github-token-sealedsecret.yml
# 4. Apply the SealedSecret to the cluster
# 5. Remove the filled file (DO NOT COMMIT)
#
# Alternative: Create Docker registry config format for Kaniko:
#   kubectl create secret docker-registry docker-config \
#     --docker-server=ghcr.io \
#     --docker-username=ardenone \
#     --docker-password=YOUR_GITHUB_TOKEN \
#     --docker-email=noreply@github.com \
#     --namespace=moltbook \
#     --dry-run=client -o yaml | kubeseal --format yaml > docker-config-sealedsecret.yml

apiVersion: v1
kind: Secret
metadata:
  name: github-token
  namespace: moltbook
type: Opaque
stringData:
  # GitHub Personal Access Token for ghcr.io authentication
  # Create at: https://github.com/settings/tokens
  # Required scopes: write:packages, read:packages, delete:packages
  GITHUB_TOKEN: "REPLACE_WITH_GITHUB_TOKEN"

  # Optional: GitHub username (defaults to 'github' in build script)
  GITHUB_USERNAME: "ardenone"
---
# Docker registry config format for Kaniko/podman builds
# This is the format expected by Kubernetes docker-registry secrets
apiVersion: v1
kind: Secret
metadata:
  name: docker-config
  namespace: moltbook
type: kubernetes.io/dockerconfigjson
data:
  # Base64-encoded docker config JSON
  # Generate with: echo -n '{"auths":{"ghcr.io":{"username":"ardenone","password":"YOUR_TOKEN","auth":"BASE64_AUTH"}}}' | base64 -w0
  # Or use: kubectl create secret docker-registry docker-config --docker-server=ghcr.io ...
  .dockerconfigjson: "REPLACE_WITH_BASE64_ENCODED_DOCKER_CONFIG_JSON"
