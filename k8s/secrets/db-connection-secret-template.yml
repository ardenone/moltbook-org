# DO NOT COMMIT - Template for database connection string
# Use this template to create a SealedSecret with kubeseal
#
# Instructions:
# 1. Get the PostgreSQL service endpoint from CNPG cluster:
#    kubectl get cluster moltbook-postgres -n moltbook -o jsonpath='{.status.writeService}'
#    This will typically be: moltbook-postgres-rw.moltbook.svc.cluster.local:5432
# 2. Fill in the DATABASE_URL with format:
#    postgresql://moltbook:PASSWORD@moltbook-postgres-rw.moltbook.svc.cluster.local:5432/moltbook?sslmode=require
# 3. Create SealedSecret: kubeseal --format yaml < db-connection-secret-template.yml > db-connection-sealedsecret.yml
# 4. Apply the SealedSecret to the cluster

apiVersion: v1
kind: Secret
metadata:
  name: moltbook-db-connection
  namespace: moltbook
type: Opaque
stringData:
  DATABASE_URL: "postgresql://moltbook:REPLACE_WITH_APP_USER_PASSWORD@moltbook-postgres-rw.moltbook.svc.cluster.local:5432/moltbook?sslmode=require"
